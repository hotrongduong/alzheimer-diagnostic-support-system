{
    "Name": "MAPDR",
    "StorageDirectory": "/var/lib/orthanc/db",
    "IndexDirectory": "/var/lib/orthanc/db",
    "StorageCompression": true,
    "MaximumStorageSize": 0,
    "MaximumPatientCount": 0,
    "MaximumStorageCacheSize": 128,
    "LuaScripts": [],
    "Plugins": [
        "/usr/share/orthanc/plugins/",
        "/usr/local/share/orthanc/plugins/"
    ],
    "ConcurrentJobs": 2,
    "HttpServerEnabled": true,
    "OrthancExplorerEnabled": true,
    "HttpPort": 8042,
    "HttpDescribeErrors": true,
    "HttpCompressionEnabled": true,
    "WebDavEnabled": true,
    "WebDavDeleteAllowed": false,
    "WebDavUploadAllowed": true,
    "DicomServerEnabled": true,
    "DicomAet": "MAPDR",
    "DicomCheckCalledAet": true,
    "DicomPort": 4242,
    "DefaultEncoding": "Latin1",
    "AcceptedTransferSyntaxes": [
        "1.2.840.10008.1.*"
    ],
    "UnknownSopClassAccepted": false,
    "DicomScpTimeout": 30,
    "RemoteAccessAllowed": true,
    "SslEnabled": false,
    "SslCertificate": "certificate.pem",
    "SslMinimumProtocolVersion": 4,
    "SslVerifyPeers": false,
    "SslTrustedClientCertificates": "trustedClientCertificates.pem",
    "AuthenticationEnabled": true,
    "RegisteredUsers": {
        "mapdr": "changestrongpassword"
    },
    "HttpHeaders": {
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Origin, X-Requested-With, Content-Type, Accept, Authorization",
        "Access-Control-Allow-Credentials": "true",
        "Access-Control-Max-Age": "86400"
    },
    // === KHỐI DICOMWEB - ĐÃ SỬA LỖI ĐỊNH DẠNG METADATA VÀ GIỮ AllowUnauthenticatedAccess ===
    "DicomWeb": {
        "Enable": true,
        "Root": "/dicom-web/",
        "PublicRoot": "/orthanc-proxy/dicom-web",
        "EnableWado": true,
        "WadoUriRoot": "/wado",
        "Strict": false,
        "AllowUnauthenticatedAccess": true,
        "RestApi": {
            "AllowUnauthenticatedAccess": true
        },
        // *** ĐÂY LÀ SỰ THAY ĐỔI LỚN: SỬ DỤNG CÁC GIÁ TRỊ CÓ SẴN CỦA ORTHANC ***
        "StudiesMetadata": "Full",
        "SeriesMetadata": "Full",
        "InstancesMetadata": "Full"
        // -----------------------------------------------------------------
    },
    "Ohif": {
        "Enable": true,
        "EnableStudyList": true,
        "DefaultDicomWebSource": {
            "Name": "orthanc",
            "Root": "http://localhost:8042/dicom-web",
            "Auth": "http:mapdr:changestrongpassword",
            "wadoRoot": "http://localhost:8042/dicom-web",
            "qidoRoot": "http://localhost:8042/dicom-web",
            "wadoSupportsStow": true,
            "qidoSupportsIncludeField": true,
            "supportsFuzzyMatching": true,
            "supportsWildcard": true,
            "imageRendering": "wadors",
            "thumbnailRendering": "wadors",
            "enableStudyLazyLoad": true
        }
    },
    "DicomTlsEnabled": false,
    "DicomTlsRemoteCertificateRequired": true,
    "DicomAlwaysAllowEcho": true,
    "DicomAlwaysAllowStore": true,
    "DicomAlwaysAllowFind": false,
    "DicomAlwaysAllowFindWorklist": false,
    "DicomAlwaysAllowGet": false,
    "DicomAlwaysAllowMove": false,
    "DicomCheckModalityHost": false,
    "DicomModalities": {},
    "DicomModalitiesInDatabase": false,
    "DicomEchoChecksFind": false,
    "DicomScuTimeout": 10,
    "DicomScuPreferredTransferSyntax": "1.2.840.10008.1.2.1",
    "DicomThreadsCount": 4,
    "OrthancPeers": {},
    "OrthancPeersInDatabase": false,
    "HttpProxy": "",
    "HttpVerbose": false,
    "HttpTimeout": 60,
    "HttpsVerifyPeers": true,
    "HttpsCACertificates": "/etc/ssl/certs/ca-certificates.crt",
    "UserMetadata": {},
    "UserContentType": {},
    "StableAge": 60,
    "StrictAetComparison": false,
    "StoreMD5ForAttachments": true,
    "LimitFindResults": 0,
    "LimitFindInstances": 0,
    "LogExportedResources": false,
    "KeepAlive": true,
    "TcpNoDelay": true,
    "HttpThreadsCount": 50,
    "StoreDicom": true,
    "DicomAssociationCloseDelay": 5,
    "QueryRetrieveSize": 100,
    "CaseSensitivePN": false,
    "LoadPrivateDictionary": true,
    "Dictionary": {},
    "SynchronousCMove": true,
    "JobsHistorySize": 10,
    "SaveJobs": true,
    "OverwriteInstances": false,
    "MediaArchiveSize": 1,
    "StorageAccessOnFind": "Always",
    "MetricsEnabled": true,
    "ExecuteLuaEnabled": false,
    "HttpRequestTimeout": 30,
    "DefaultPrivateCreator": "",
    "StorageCommitmentReportsSize": 100,
    "TranscodeDicomProtocol": true,
    "BuiltinDecoderTranscoderOrder": "After",
    "IngestTranscoding": "1.2.840.10008.1.2.4.91",
    "IngestTranscodingOfUncompressed": true,
    "IngestTranscodingOfCompressed": true,
    "DicomLossyTranscodingQuality": 90,
    "SyncStorageArea": true,
    "MallocArenaMax": 5,
    "DeidentifyLogs": true,
    "DeidentifyLogsDicomVersion": "2021b",
    "MaximumPduLength": 16384,
    "CheckRevisions": false,
    "SynchronousZipStream": true,
    "ZipLoaderThreads": 0,
    "Warnings": {
        "W001_TagsBeingReadFromStorage": true,
        "W002_InconsistentDicomTagsInDb": true
    }
}